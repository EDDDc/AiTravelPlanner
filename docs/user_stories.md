# 用户故事与验收标准

## 1. 行程规划

### US-TP-001 新建行程（语音 + 文本）

- 作为：准备自由行的用户
- 我想要：通过语音或文本描述旅行需求并生成行程
- 以便：快速获得多日可执行的日程安排

验收标准：

```
Given 用户已登录并在仪表盘
When 用户点击“新建行程”并填写基础信息
And 提交语音录制或文本描述
Then 系统在 3 分钟内生成包含交通/住宿/景点/餐饮的行程
And 用户可以预览并保存该行程
```

### US-TP-002 编辑行程

```
Given 行程已生成并展示在时间轴
When 用户拖拽活动或修改时间/备注
Then 新顺序即时保存并同步至数据库
And 地图视图的线路与活动信息同步更新
```

### US-TP-003 地图定位

```
Given 用户在行程详情页
When 用户切换到“地图”视图并选择某一活动
Then 地图中心定位到该活动位置
And 展示路线、交通方式与推荐 POI
```

## 2. 预算与记账

### US-BG-001 查看预算概览

```
Given 行程存在预算与消费数据
When 用户打开“预算中心”
Then 系统展示总预算、已用金额、剩余金额
And 按分类的统计图表
```

### US-BG-002 语音记账

```
Given 用户在预算中心或行程详情页
When 用户使用语音录入开销（例如“午餐 250 元”）
Then 系统在 2 分钟内完成识别、分类并新增费用记录
And 列表展示转写文本与可编辑金额分类
```

### US-BG-003 导出报表

```
Given 行程包含预算数据
When 用户点击“导出 CSV”
Then 系统生成包含日期、金额、分类、备注的 CSV 文件供下载
```

## 3. 用户设置与同步

### US-ST-001 管理 API Key

```
Given 用户已登录
When 用户进入设置中心并输入阿里云百炼/科大讯飞等 Key
Then 后端校验 Key 有效性
And 将加密后的 Key 存储，返回“更新成功”
```

### US-ST-002 云端同步

```
Given 用户在任意设备登录
When 打开行程详情
Then 能看到最新保存的行程、预算与偏好数据
And 在另一设备修改后 10 秒内收到更新提示
```

## 4. 旅行辅助

### US-AS-001 行程提醒

```
Given 用户已经为行程设置提醒
When 行程临近或费用超出阈值
Then 系统通过邮件或站内通知提醒用户
```

### US-AS-002 旅行问答

```
Given 用户处于行程详情页
When 用户向旅行助手提出问题（例如“附近有哪些亲子餐厅”）
Then 系统调用百炼模型给出回答，附上相关 POI 链接
```

---

后续迭代可为每个用户故事补充优先级、预估工时以及测试用例。若验收标准有变更，请同步更新此文档和 `development_flow.md`。
