# AI Travel Planner 项目开发流程

## 阶段 0：项目启动与环境准备
- [ ] 确认团队角色与分工（前端 / 后端 / 测试 / 运维）
- [ ] 建立项目管理看板（GitHub Projects 或飞书多维表格）
- [ ] 搭建开发环境：Node.js 版本、Java/Spring Boot SDK、包管理工具、Docker
- [ ] 配置代码规范与工具：Lint、Prettier、EditorConfig、Git Hook（Husky + lint-staged）
- [ ] 创建 `.env.example`，约定 API Key、数据库连接等环境变量命名
- [ ] 制定 API Key 管理规范：禁止提交真实 Key，设置配置页面及后端密文存储策略

## 阶段 1：产品设计与原型确认
- [ ] 输出低保真原型（行程概览、地图、预算、设置页面）并评审
- [ ] 完善信息架构与导航流程，确认 MVP 功能边界
- [ ] 细化用户故事与验收标准（Given-When-Then）
- [ ] 评审并锁定 PRD、原型、业务字段字典
- [ ] 建立接口文档（例如 Apifox/Swagger 草稿）

## 阶段 2：后端基础设施
- [ ] 初始化 Spring Boot 工程（Gradle/Maven），配置多环境（dev/stage/prod）
- [ ] 集成数据库连接（首选 Supabase PostgreSQL，备选自建 PostgreSQL + Keycloak）
- [ ] 完成基础实体与迁移脚本（Flyway/Liquibase）
- [ ] 搭建用户认证模块（注册、登录、JWT 策略）
- [ ] 实现 Key 管理 API：保存/更新/校验阿里云百炼与科大讯飞 Key（密文存储）
- [ ] 编写基础测试（单元 + 集成）确保用户体系与 Key 接口稳定

## 阶段 3：前端框架与通用能力
- [ ] 使用 Vite 创建 Vue 3 + TypeScript 项目，配置别名与路径
- [ ] 集成 Pinia、Vue Router、Axios（或其他请求库）
- [ ] 建立全局样式体系（Tailwind 或自定义样式方案）
- [ ] 实现登录/注册页面与全局布局（顶部导航 + 侧边栏）
- [ ] 完成 API Key 设置页：前端表单 + 安全存储 + 与后端对接
- [ ] 引入高德地图 SDK 基础封装，验证地图加载

## 阶段 4：核心业务功能迭代
### 4.1 行程规划
- [ ] 设计行程数据模型的前端状态结构
- [ ] 实现行程需求输入表单（语音/文本）
- [ ] 接入科大讯飞语音转写，完成请求签名与前端录音上传流程
- [ ] 后端对接阿里云百炼大模型，输出结构化计划（使用提示词模板）
- [ ] 完成行程卡片视图与时间轴展示，支持拖拽调整
- [ ] 在地图中绘制每日路径、展示 POI 信息窗口

### 4.2 预算与记账
- [ ] 设计预算模块 API（预算目标、费用记录、分类）
- [ ] 前端实现预算概览、分类统计、明细列表
- [ ] 集成语音记账流程（录音 → 讯飞转写 → 解析金额/分类 → 后端入库）
- [ ] 提供 CSV 导出功能（后端导出或前端生成）

## 阶段 5：增强与辅助功能
- [ ] 实现行程提醒（站内通知 / 邮件，可使用第三方邮件服务）
- [ ] POI 拓展：基于高德服务获取附近推荐、支持快速插入行程
- [ ] 行程多版本管理：草稿 / 已发布 / 归档状态
- [ ] 增加旅行问答界面，复用百炼模型进行追加咨询
- [ ] 完善错误处理与重试机制（语音/模型/地图接口）

## 阶段 6：测试、优化与发布
- [ ] 编写端到端测试（Cypress 或 Playwright）覆盖核心用户流程
- [ ] 性能与安全检查：首屏加载、接口响应、日志脱敏
- [ ] 完善 README（运行步骤、环境变量说明、Docker 使用、Key 配置指引）
- [ ] 编写部署脚本与 Dockerfile（前后端分层构建，多阶段压缩）
- [ ] 配置 GitHub Actions：单元测试、构建、Docker 镜像构建与推送
- [ ] 准备提交 PDF：包含仓库链接、运行说明、Key 获取方式（不含真实 Key）

## 阶段 7：运维与迭代计划
- [ ] 监控与日志：接入 APM/日志服务（SkyWalking、阿里云日志等）
- [ ] 计划后续功能迭代（多用户协作、移动端适配、离线包等）
- [ ] 收集用户反馈渠道，建立需求评审与优先级流程
- [ ] 定期回顾开发流程与代码质量，整理技术债务清单
